#################################################################################
#  Key Bindings
#################################################################################

# tmux prefix set to backtick. This is rarely used for anything else, and it's less fingers than CTRL-A
# also, `1 `2 `3 chooses windows really quickly.
unbind C-b
set -g prefix `
bind ` send-prefix

# command prompt on both colon and semi-colon, makes it reachable without SHIFT key
bind : command-prompt
bind \; command-prompt

# swap the PREFIX key around.
# sometimes you need the backtick, so use f11 and f12 to quickly change from one to the other.
# f11 bound to set prefix to backtick
# f12 bound to set prefix to CTRL-A
bind -n F11 set -g prefix ` \; bind ` send-prefix
bind -n F12 set -g prefix C-a \; bind C-a send-prefix


# To copy:
if-shell -b 'test $TMUX_VERSION -lt 24' \
  'bind -t emacs-copy M-w copy-pipe "xclip -i -sel p -f | xclip -i -sel c" \; display-message "copied to system clipboard"' \
  'bind -T copy-mode M-w send -X copy-pipe "xclip -i -sel p -f | xclip -i -sel c" \; display-message "copied to system clipboard"'

# To paste:
unbind C-y
bind -n C-y run "xclip -o | tmux load-buffer - ; tmux paste-buffer"

unbind C-v
bind -n C-v run "tmux save-buffer - | xclip -i -sel p -f | xclip -i -sel c -f | tmux load-buffer - ; tmux paste-buffer"

# window splitting
unbind %
unbind '"'
bind | split-window -h -c "#{pane_current_path}"
bind '\' split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
if-shell -b 'test $TMUX_VERSION -le 28' \
  'bind "\\" split-window -h' \
  'bind "\\" split-window -h -c "#{pane_current_path}"'

# vi hjkl pane travel
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# resize panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# quickly switch panes
unbind C-j
bind / last-pane
bind < select-pane -t :.-
bind > select-pane -t :.+
bind , select-pane -t :.- # <
bind . select-pane -t :.+ # >

# toggle synchronize typing in panes
bind y setw synchronize-panes

# bind some window control keys
bind = new-window
bind + new-window
bind x kill-pane
bind X kill-window
bind n command-prompt 'rename-window %%'
bind N command-prompt 'rename-session %%'

# split the screen and show man pages
unbind m
bind m command-prompt -p "Show man pages for?" "split-window 'man %%'"

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf \; display ".tmux.conf Reloaded!"
